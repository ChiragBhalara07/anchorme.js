/*!
* Anchorme.js
* 0.3
*
* Copyright(c) 2015 Ali Saleem <ali.a.saleem@outlook.com>
* MIT Licensed. http://www.opensource.org/licenses/mit-license.php
*
* https://github.com/ali-saleem/anchorme.js
*/
var anchorme={};anchorme.occurrences=function(e,a,n){if(e+="",a+="",a.length<=0)return e.length+1;for(var r=0,i=0,o=n?1:a.length;;){if(i=e.indexOf(a,i),!(i>=0))break;r++,i+=o}return r},anchorme.dontbreakHTML=function(e,a,n){for(var r="<"+a+" ",i=e.split(">"),o=i.length;o--;){var t=i[o].split(r).pop().split(">").shift(),s=t.indexOf(n);if("'"===t.charAt(s+5)||'"'===t.charAt(s+5))var c=s+5,l=t.charAt(c);else if("'"===t.charAt(s+6)||'"'===t.charAt(s+6))var c=s+6,l=t.charAt(c);else if("'"===t.charAt(s+7)||'"'===t.charAt(s+7))var c=s+7,l=t.charAt(c);var d=c+1,m=t.slice(d),h=m.indexOf(l)+d,g=t.slice(s,h+1),b=g.split(" ").join("");i[o]=i[o].replace(g,b)}return i.join(">")},anchorme.order=function(e,a){for(var n=e.split(a),r=0;r<n.length;r++){for(var i,o=!1,t=!1,s=!0,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~:/?#[]@!$&'()*+,;=",l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!#$%&'*+-/=?^_`{|}~.",d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-.:",m=n[r].toLowerCase(),h=0;h<m.length;h++){var g=m[h];-1===c.indexOf(g)&&(h=m.length,s=!1)}if(s){var b=m.indexOf("http:/"),f=m.indexOf("https:/"),x=m.indexOf("ftp:/"),u=m.indexOf("file:/"),p=[".com",".net",".org",".edu",".gov",".uk",".ca",".de",".jp",".info",".cn",".fr",".in",".pl",".au",".us",".ru",".ch",".it",".nl",".se",".no",".es",".mil",".guru",".berlin",".photography",".tips",".today",".email",".technology",".company",".clothing",".ir",".biz",".cz",".kr",".eu",".ua",".za",".co",".gr",".ro",".tw",".mx",".vn",".at",".dk",".tv",".me",".hu",".ar",".sk",".fi",".cl",".id",".nz",".cc",".pt",".by",".il",".ie",".my",".mobi",".ws",".pro",".asia",".abb",".abbott",".abogado",".ac",".academy",".accenture",".accountant",".accountants",".active",".actor",".ad",".ads",".adult",".ae",".aeg",".aero",".af",".afl",".ag",".agency",".ai",".aig",".airforce",".airtel",".al",".allfinanz",".alsace",".am",".amsterdam",".an",".android",".ao",".apartments",".app",".aq",".aquarelle",".archi",".army",".arpa",".as",".associates",".attorney",".auction",".audio",".auto",".autos",".aw",".ax",".axa",".az",".azure",".ba",".band",".bank",".bar",".barcelona",".barclaycard",".barclays",".bargains",".bauhaus",".bayern",".bb",".bbc",".bbva",".bcn",".bd",".be",".beer",".bentley",".best",".bf",".bg",".bh",".bharti",".bi",".bible",".bid",".bike",".bing",".bingo",".bio",".bj",".black",".blackfriday",".bloomberg",".blue",".bm",".bmw",".bn",".bnl",".bnpparibas",".bo",".boats",".bond",".boo",".boutique",".br",".bradesco",".bridgestone",".broker",".brother",".brussels",".bs",".bt",".budapest",".build",".builders",".business",".buzz",".bv",".bw",".bz",".bzh",".cab",".cafe",".cal",".camera",".camp",".cancerresearch",".canon",".capetown",".capital",".caravan",".cards",".care",".career",".careers",".cars",".cartier",".casa",".cash",".casino",".cat",".catering",".cba",".cbn",".cd",".center",".ceo",".cern",".cf",".cfa",".cfd",".cg",".channel",".chat",".cheap",".chloe",".christmas",".chrome",".church",".ci",".cisco",".citic",".city",".ck",".claims",".cleaning",".click",".clinic",".cloud",".club",".cm",".coach",".codes",".coffee",".college",".cologne",".commbank",".community",".computer",".condos",".construction",".consulting",".contractors",".cooking",".cool",".coop",".corsica",".country",".coupons",".courses",".cr",".credit",".creditcard",".cricket",".crown",".crs",".cruises",".cu",".cuisinella",".cv",".cw",".cx",".cy",".cymru",".cyou",".dabur",".dad",".dance",".date",".dating",".datsun",".day",".dclk",".deals",".degree",".delivery",".delta",".democrat",".dental",".dentist",".desi",".design",".dev",".diamonds",".diet",".digital",".direct",".directory",".discount",".dj",".dm",".dnp",".do",".docs",".dog",".doha",".domains",".doosan",".download",".drive",".durban",".dvag",".dz",".earth",".eat",".ec",".education",".ee",".eg",".emerck",".energy",".engineer",".engineering",".enterprises",".epson",".equipment",".er",".erni",".esq",".estate",".et",".eurovision",".eus",".events",".everbank",".exchange",".expert",".exposed",".express",".fail",".faith",".fan",".fans",".farm",".fashion",".feedback",".film",".finance",".financial",".firmdale",".fish",".fishing",".fit",".fitness",".fj",".fk",".flights",".florist",".flowers",".flsmidth",".fly",".fm",".fo",".foo",".football",".forex",".forsale",".forum",".foundation",".frl",".frogans",".fund",".furniture",".futbol",".fyi",".ga",".gal",".gallery",".game",".garden",".gb",".gbiz",".gd",".gdn",".ge",".gent",".genting",".gf",".gg",".ggee",".gh",".gi",".gift",".gifts",".gives",".gl",".glass",".gle",".global",".globo",".gm",".gmail",".gmo",".gmx",".gn",".gold",".goldpoint",".golf",".goo",".goog",".google",".gop",".gp",".gq",".graphics",".gratis",".green",".gripe",".gs",".gt",".gu",".guge",".guide",".guitars",".gw",".gy",".hamburg",".hangout",".haus",".healthcare",".help",".here",".hermes",".hiphop",".hitachi",".hiv",".hk",".hm",".hn",".hockey",".holdings",".holiday",".homedepot",".homes",".honda",".horse",".host",".hosting",".hoteles",".hotmail",".house",".how",".hr",".hsbc",".ht",".ibm",".icbc",".icu",".ifm",".iinet",".im",".immo",".immobilien",".industries",".infiniti",".ing",".ink",".institute",".insure",".int",".international",".investments",".io",".iq",".irish",".is",".ist",".istanbul",".iwc",".java",".jcb",".je",".jetzt",".jewelry",".jlc",".jll",".jm",".jo",".jobs",".joburg",".jprs",".juegos",".kaufen",".kddi",".ke",".kg",".kh",".ki",".kim",".kitchen",".kiwi",".km",".kn",".koeln",".komatsu",".kp",".krd",".kred",".kw",".ky",".kyoto",".kz",".la",".lacaixa",".land",".lasalle",".lat",".latrobe",".law",".lawyer",".lb",".lc",".lds",".lease",".leclerc",".legal",".lgbt",".li",".liaison",".lidl",".life",".lighting",".limited",".limo",".link",".live",".lk",".loan",".loans",".lol",".london",".lotte",".lotto",".love",".lr",".ls",".lt",".ltda",".lu",".lupin",".luxe",".luxury",".lv",".ly",".ma",".madrid",".maif",".maison",".management",".mango",".market",".marketing",".markets",".marriott",".mba",".mc",".md",".media",".meet",".melbourne",".meme",".memorial",".men",".menu",".mg",".mh",".miami",".microsoft",".mini",".mk",".ml",".mm",".mma",".mn",".mo",".moda",".moe",".monash",".money",".montblanc",".mormon",".mortgage",".moscow",".motorcycles",".mov",".movie",".movistar",".mp",".mq",".mr",".ms",".mt",".mtn",".mtpc",".mu",".museum",".mv",".mw",".mz",".na",".nadex",".nagoya",".name",".navy",".nc",".ne",".nec",".netbank",".network",".neustar",".new",".news",".nexus",".nf",".ng",".ngo",".nhk",".ni",".nico",".ninja",".nissan",".np",".nr",".nra",".nrw",".ntt",".nu",".nyc",".office",".okinawa",".om",".omega",".one",".ong",".onl",".online",".ooo",".oracle",".orange",".organic",".osaka",".otsuka",".ovh",".pa",".page",".panerai",".paris",".partners",".parts",".party",".pe",".pf",".pg",".ph",".pharmacy",".philips",".photo",".photos",".physio",".piaget",".pics",".pictet",".pictures",".pink",".pizza",".pk",".place",".play",".plumbing",".plus",".pm",".pn",".pohl",".poker",".porn",".post",".pr",".praxi",".press",".prod",".productions",".prof",".properties",".property",".ps",".pub",".pw",".py",".qa",".qpon",".quebec",".racing",".re",".realtor",".realty",".recipes",".red",".redstone",".rehab",".reise",".reisen",".reit",".ren",".rent",".rentals",".repair",".report",".republican",".rest",".restaurant",".review",".reviews",".rich",".ricoh",".rio",".rip",".rocks",".rodeo",".rs",".rsvp",".ruhr",".run",".rw",".ryukyu",".sa",".saarland",".sakura",".sale",".samsung",".sandvik",".sandvikcoromant",".sap",".sarl",".saxo",".sb",".sc",".sca",".scb",".schmidt",".scholarships",".school",".schule",".schwarz",".science",".scor",".scot",".sd",".seat",".sener",".services",".sew",".sex",".sexy",".sg",".sh",".shiksha",".shoes",".show",".shriram",".si",".singles",".site",".sj",".ski",".sky",".skype",".sl",".sm",".sn",".sncf",".so",".soccer",".social",".software",".sohu",".solar",".solutions",".sony",".soy",".space",".spiegel",".spreadbetting",".sr",".st",".starhub",".statoil",".studio",".study",".style",".su",".sucks",".supplies",".supply",".support",".surf",".surgery",".suzuki",".sv",".swatch",".swiss",".sx",".sy",".sydney",".systems",".sz",".taipei",".tatar",".tattoo",".tax",".taxi",".tc",".td",".team",".tech",".tel",".telefonica",".temasek",".tennis",".tf",".tg",".th",".thd",".theater",".tickets",".tienda",".tires",".tirol",".tj",".tk",".tl",".tm",".tn",".to",".tokyo",".tools",".top",".toray",".toshiba",".tours",".town",".toys",".tr",".trade",".trading",".training",".travel",".trust",".tt",".tui",".tz",".ubs",".ug",".university",".uno",".uol",".uy",".uz",".va",".vacations",".vc",".ve",".vegas",".ventures",".versicherung",".vet",".vg",".vi",".viajes",".video",".villas",".vision",".vista",".vistaprint",".vlaanderen",".vodka",".vote",".voting",".voto",".voyage",".vu",".wales",".walter",".wang",".watch",".webcam",".website",".wed",".wedding",".weir",".wf",".whoswho",".wien",".wiki",".williamhill",".win",".windows",".wme",".work",".works",".world",".wtc",".wtf",".xbox",".xerox",".xin",".xn--1qqw23a",".xn--30rr7y",".xn--3bst00m",".xn--3ds443g",".xn--3e0b707e",".xn--45brj9c",".xn--45q11c",".xn--4gbrim",".xn--55qw42g",".xn--55qx5d",".xn--6frz82g",".xn--6qq986b3xl",".xn--80adxhks",".xn--80ao21a",".xn--80asehdb",".xn--80aswg",".xn--90a3ac",".xn--90ais",".xn--9et52u",".xn--b4w605ferd",".xn--c1avg",".xn--cg4bki",".xn--clchc0ea0b2g2a9gcd",".xn--czr694b",".xn--czrs0t",".xn--czru2d",".xn--d1acj3b",".xn--d1alf",".xn--estv75g",".xn--fiq228c5hs",".xn--fiq64b",".xn--fiqs8s",".xn--fiqz9s",".xn--fjq720a",".xn--flw351e",".xn--fpcrj9c3d",".xn--fzc2c9e2c",".xn--gecrj9c",".xn--h2brj9c",".xn--hxt814e",".xn--i1b6b1a6a2e",".xn--imr513n",".xn--io0a7i",".xn--j1amh",".xn--j6w193g",".xn--kcrx77d1x4a",".xn--kprw13d",".xn--kpry57d",".xn--kput3i",".xn--l1acc",".xn--lgbbat1ad8j",".xn--mgb9awbf",".xn--mgba3a4f16a",".xn--mgbaam7a8h",".xn--mgbab2bd",".xn--mgbayh7gpa",".xn--mgbbh1a71e",".xn--mgbc0a9azcg",".xn--mgberp4a5d4ar",".xn--mgbpl2fh",".xn--mgbx4cd0ab",".xn--mxtq1m",".xn--ngbc5azd",".xn--node",".xn--nqv7f",".xn--nqv7fs00ema",".xn--nyqy26a",".xn--o3cw4h",".xn--ogbpf8fl",".xn--p1acf",".xn--p1ai",".xn--pgbs0dh",".xn--q9jyb4c",".xn--qcka1pmc",".xn--rhqv96g",".xn--s9brj9c",".xn--ses554g",".xn--unup4y",".xn--vermgensberater-ctb",".xn--vermgensberatung-pwb",".xn--vhquv",".xn--vuq861b",".xn--wgbh1c",".xn--wgbl6a",".xn--xhq521b",".xn--xkc2al3hye2a",".xn--xkc2dl3a5ee0h",".xn--y9a3aq",".xn--yfro4i67o",".xn--ygbi2ammx",".xn--zfr164b",".xxx",".xyz",".yachts",".yandex",".ye",".yodobashi",".yoga",".yokohama",".youtube",".yt",".zip",".zm",".zone",".zuerich",".zw"];if(0===b||0===f||0===x||0===u)o=!0;else if(m.indexOf(".")>0){if(anchorme.occurrences(m,".")>=3){var k=m.split("."),v=k[0],y=k[1],w=k[2];if(k[3].indexOf("/")>-1)var O=k[3].indexOf("/"),j=k[3].substring(0,O),q=k[3].substring(O);else var j=k[3],q=!1;(q===!1||"/"===q.charAt(0))&&!isNaN(v)&&!isNaN(y)&&!isNaN(w)&&!isNaN(j)&&255>v-1&&255>v-1&&255>v-1&&255>v-1?(o=!0,t="http://"):i="email"}else i="email";if("email"===i)if(1==anchorme.occurrences(m,"@")){for(var z=m.indexOf("@"),L=m.substring(0,z),H=m.substring(z+1,m.length),M=!0,h=0;h<L.length;h++){var g=L[h];-1===l.indexOf(g)&&(h=L.length,M=!1)}for(var h=0;h<H.length;h++){var g=H[h];-1===d.indexOf(g)&&(h=H.length,M=!1)}if(M)for(var h=0;h<p.length;h++){var T=p[h];-1!==m.indexOf(T,m.length-T.length)?(o=!0,t="mailto:",h=p.length,i=""):i="domains"}else i="domains"}else i="domains";if("domains"===i){var A=!0;if(m.indexOf("/")>4)for(var O=m.indexOf("/"),N=m.substring(0,O),h=0;h<N.length;h++){var g=N[h];-1===d.indexOf(g)&&(h=N.length,A=!1)}else for(var h=0;h<m.length;h++){var g=m[h];-1===d.indexOf(g)&&(h=m.length,A=!1)}if(A)if(0===m.indexOf("www."))o=!0,t="http://";else for(var h=0;h<p.length;h++){var T=p[h],C=T+"/",B=T+":";-1!==m.indexOf(T,m.length-T.length)?(o=!0,t="http://",h=p.length):m.indexOf(C)>-1?(o=!0,t="http://",h=p.length):m.indexOf(B)>-1&&(o=!0,t="http://",h=p.length)}}}var D=t?t+m:m;o&&(n[r]="<a href='"+D+"'>"+m+"</a>")}}return n.join(a)},anchorme.anchor=function(e){e.indexOf("</a>")>-1&&(e=anchorme.dontbreakHTML(e,"a","href")),e.indexOf("</img>")>-1&&(e=anchorme.dontbreakHTML(e,"img","src")),e.indexOf("</blockquote >")>-1&&(e=anchorme.dontbreakHTML(e,"blockquote","cite")),e.indexOf("</del>")>-1&&(e=anchorme.dontbreakHTML(e,"del","cite")),e.indexOf("</iframe>")>-1&&(e=anchorme.dontbreakHTML(e,"iframe","src")),e.indexOf("</q>")>-1&&(e=anchorme.dontbreakHTML(e,"q","cite")),e.indexOf("</script>")>-1&&(e=anchorme.dontbreakHTML(e,"script","src")),e.indexOf("</audio>")>-1&&(e=anchorme.dontbreakHTML(e,"audio","src")),e.indexOf("</button>")>-1&&(e=anchorme.dontbreakHTML(e,"button","formaction")),e.indexOf("</command>")>-1&&(e=anchorme.dontbreakHTML(e,"command","icon")),e.indexOf("</embed>")>-1&&(e=anchorme.dontbreakHTML(e,"embed","src")),e.indexOf("</html>")>-1&&(e=anchorme.dontbreakHTML(e,"html","manifest")),e.indexOf("</video>")>-1&&(e=anchorme.dontbreakHTML(e,"video","poster")),e.indexOf("</video>")>-1&&(e=anchorme.dontbreakHTML(e,"video","src")),e.indexOf("</applet>")>-1&&(e=anchorme.dontbreakHTML(e,"applet","codebase")),e.indexOf("</area>")>-1&&(e=anchorme.dontbreakHTML(e,"area","href")),e.indexOf("</base>")>-1&&(e=anchorme.dontbreakHTML(e,"base","href")),e.indexOf("</body>")>-1&&(e=anchorme.dontbreakHTML(e,"body","background")),e.indexOf("</frame>")>-1&&(e=anchorme.dontbreakHTML(e,"frame","src")),e.indexOf("</head>")>-1&&(e=anchorme.dontbreakHTML(e,"head","profile")),e.indexOf("longdesc")>-1&&(e=anchorme.dontbreakHTML(e,"img","longdesc")),e.indexOf("longdesc")>-1&&(e=anchorme.dontbreakHTML(e,"iframe","longdesc")),e.indexOf("usemap")>-1&&(e=anchorme.dontbreakHTML(e,"img","usemap")),e.indexOf("</link>")>-1&&(e=anchorme.dontbreakHTML(e,"link","href")),e.indexOf("</input>")>-1&&(e=anchorme.dontbreakHTML(e,"input","formaction")),e.indexOf("</source>")>-1&&(e=anchorme.dontbreakHTML(e,"source","src")),e=e.split("\n").join(" \n "),e=e.split(" (").join(" ( "),e=e.split(")").join(" )");var a=anchorme.order(e," "),n=anchorme.order(a,"\n");return n=n.split("( ").join("("),n=n.split(" )").join(")")};
